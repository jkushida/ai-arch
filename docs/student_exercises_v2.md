# AI建築設計 パラメータ観察演習
## ～変数を変えて建物の性能変化を観察しよう～

## 🎯 演習の目的

建築設計のパラメータを1つずつ変更して、建物の性能がどう変化するかを観察し、パラメータと性能の関係を理解します。

---

## 📋 演習の準備

### 1. 作業ディレクトリの確認
AI_archフォルダに移動してから作業を始めてください。

### 2. 基本コマンドの確認
```bash
# FreeCADコマンドラインでの実行
/Applications/FreeCAD.app/Contents/Resources/bin/freecadcmd code/test_generate_building.py
```

**実行すると生成されるファイル：**
- `test_results.csv` - FEM解析結果が記録されるCSVファイル（初回は新規作成、2回目以降は追記）
- `test_building_YYYYMMDD_HHMMSS.FCStd` - 3Dモデルファイル（タイムスタンプ付き）

**重要：** test_results.csvは実行するたびに新しい行が追記されるので、パラメータを変更しながら複数回実行すると、全ての結果が1つのファイルに蓄積されます。これにより、後でExcelで開いて比較分析が簡単にできます。

---

## 🔬 演習課題

### 課題1: 建物サイズの影響を観察

**目的：** 建物の幅（Lx）を変えると、安全率とコストがどう変化するか観察する

#### 手順：
1. test_generate_building.pyを開く
2. 以下の値でLxを変更して、それぞれ実行：
   - Lx = 6.0 → 実行 → 結果確認
   - Lx = 8.0 → 実行 → 結果確認  
   - Lx = 10.0 → 実行 → 結果確認
   - Lx = 12.0 → 実行 → 結果確認

```python
# 33行目のLxの値を変更
default_params = {
    'Lx': 6.0,  # ← ここを変更（6.0, 8.0, 10.0, 12.0）
    'Ly': 6.0,
    # ...
}
```

#### 観察ポイント：
- [ ] 建物が大きくなると安全率はどうなる？
- [ ] 建物が大きくなるとコスト/m²はどうなる？
- [ ] なぜそのような変化が起きるか考えてみよう

---

### 課題2: 柱の太さの影響を観察

**目的：** 柱のサイズ（bc, hc）を変えると、安全率がどう改善するか観察する

#### 手順：
1. Lxを8.0に戻す
2. 以下の値でbc, hcを変更して実行：
   - bc = 200, hc = 200 → 実行
   - bc = 300, hc = 300 → 実行
   - bc = 400, hc = 400 → 実行
   - bc = 500, hc = 500 → 実行

```python
# 43-44行目の値を変更
'bc': 300,  # ← 両方同じ値に変更
'hc': 300,  # ← 両方同じ値に変更
```

#### 観察ポイント：
- [ ] 柱を太くすると安全率は何倍になる？
- [ ] 柱を太くするとコストはどれくらい増える？
- [ ] 安全率2.0を達成するには柱は何mm必要？

---

### 課題3: 材料の影響を観察

**目的：** コンクリート（0）と木材（1）で性能がどう違うか観察する

#### 手順：
1. bc, hcを400に戻す
2. 材料パラメータを変更して実行：

**実験A: 全てコンクリート**
```python
material_params = {
    'material_columns': 0,
    'material_floor1': 0,
    'material_floor2': 0,
    'material_roof': 0,
    'material_walls': 0,
    'material_balcony': 0
}
```

**実験B: 全て木材**
```python
material_params = {
    'material_columns': 1,
    'material_floor1': 1,
    'material_floor2': 1,
    'material_roof': 1,
    'material_walls': 1,
    'material_balcony': 1
}
```

**実験C: ハイブリッド（柱はコンクリート、他は木材）**
```python
material_params = {
    'material_columns': 0,  # コンクリート
    'material_floor1': 0,   # コンクリート
    'material_floor2': 1,   # 木材
    'material_roof': 1,     # 木材
    'material_walls': 1,    # 木材
    'material_balcony': 0   # コンクリート
}
```

#### 観察ポイント：
- [ ] 木材にするとCO2排出量はどれくらい減る？
- [ ] 木材にすると安全率はどうなる？
- [ ] ハイブリッド構造のメリットは？

---

### 課題4: 階高の影響を観察

**目的：** 階高（H1, H2）を変えると快適性がどう変化するか観察する

#### 手順：
1. 材料を全てコンクリートに戻す
2. 以下の値でH1, H2を変更：
   - H1 = 2.5, H2 = 2.5 → 実行
   - H1 = 3.0, H2 = 3.0 → 実行
   - H1 = 3.5, H2 = 3.5 → 実行
   - H1 = 4.0, H2 = 4.0 → 実行

#### 観察ポイント：
- [ ] 階高が高いと快適性スコアはどうなる？
- [ ] 階高が高いと安全率はどうなる？
- [ ] 最適な階高は何メートル？

---

### 課題5: 窓面積の影響を観察

**目的：** 窓面積比を変えると快適性と構造のバランスがどうなるか観察する

#### 手順：
1. H1, H2を3.0に戻す
2. window_ratio_2fを変更：
   - 0.2 → 実行（窓が少ない）
   - 0.4 → 実行（標準）
   - 0.6 → 実行（窓が多い）
   - 0.8 → 実行（ほぼ全面窓）

```python
'window_ratio_2f': 0.4,  # ← ここを変更
```

#### 観察ポイント：
- [ ] 窓が多いと快適性はどうなる？
- [ ] 窓が多いと安全率はどうなる？
- [ ] 窓面積の最適値は？

---

## 📊 結果の分析

### Excelでtest_results.csvを開いて分析

1. **相関を観察**
   - どのパラメータが最も安全率に影響する？
   - コストと性能のバランスが良いのはどの設定？

2. **最適値を探す**
   - 安全率 > 2.0
   - コスト < 500,000円/m²
   - 快適性 > 6.0
   - これらを全て満たす設計は？

---

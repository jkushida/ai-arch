<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI建築設計 実践演習ガイド</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown-light.min.css">
    <!-- Mermaidを先に読み込み、即座に初期化 -->
    <script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        // Mermaidを即座に初期化（MathJaxより先に処理）
        mermaid.initialize({ 
            startOnLoad: true,
            logLevel: 'error'
        });
    </script>
    
    <!-- MathJax for LaTeX (Mermaidの後に読み込み) -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\(', '\)']],
                displayMath: [['$$', '$$'], ['\[', '\]']]
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'annotation', 'annotation-xml'],
                processHtmlClass: 'tex2jax_process',
                ignoreHtmlClass: 'mermaid|tex2jax_ignore'  // Mermaidブロックを無視
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
        }
        .container {
            display: flex;
            min-height: 100vh;
        }
        .sidebar {
            width: 280px;
            background-color: #f6f8fa;
            border-right: 1px solid #e1e4e8;
            padding: 20px;
            overflow-y: auto;
            position: fixed;
            height: 100vh;
            box-sizing: border-box;
        }
        .sidebar h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #24292e;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0 0 20px 0;
        }
        .sidebar > ul > li {
            margin-bottom: 8px;
        }
        .sidebar ul ul {
            margin-left: 16px;
            margin-top: 4px;
        }
        .sidebar a {
            color: #0366d6;
            text-decoration: none;
            font-size: 14px;
            display: block;
            padding: 4px 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .sidebar a:hover {
            background-color: #e1e4e8;
        }
        .sidebar a.active {
            background-color: #0366d6;
            color: white;
        }
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 40px;
            max-width: 980px;
            box-sizing: border-box;
        }
        .markdown-body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
        }
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: #0366d6;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
            cursor: pointer;
        }
        .back-to-top.visible {
            opacity: 0.9;
        }
        .back-to-top:hover {
            opacity: 1;
        }
        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
            .main-content {
                margin-left: 0;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="sidebar">
            <h3>📑 目次</h3>
            <ul><li><a href="#-演習の目的">🎯 演習の目的</a></li><li><a href="#-事前準備">🛠️ 事前準備</a></li><li><a href="#-演習課題">📚 演習課題</a></li><li><a href="#-レポート作成ガイド">📝 レポート作成ガイド</a></li><li><a href="#-評価基準">📊 評価基準</a></li><li><a href="#-トラブルシューティング">🆘 トラブルシューティング</a></li><li><a href="#-参考資料・リンク">📚 参考資料・リンク</a></li><li><a href="#-提出前チェックリスト">✅ 提出前チェックリスト</a></li><li><a href="#-成功のヒント">💡 成功のヒント</a></li></ul>
            
            <h3>📁 その他のドキュメント</h3>
            <ul>
                <li><a href="index.html">📚 ドキュメントホーム</a></li>
                <li><a href="generate_building_fem_analyze_report.html">📊 FEM解析システム</a></li>
                <li><a href="test_generate_building_usage.html">🧪 テストツール</a></li>
                <li><a href="PSO_usage.html">🚀 PSO使用ガイド</a></li>
            </ul>
            
            <h3>🔗 リンク</h3>
            <ul>
                <li><a href="https://github.com/jkushida/ai-arch" target="_blank">GitHub →</a></li>
            </ul>
        </nav>
        
        <main class="main-content">
            <article class="markdown-body">
                <h1 id="ai建築設計-実践演習ガイド">AI建築設計 実践演習ガイド</h1>
<h2 id="-演習の目的">🎯 演習の目的</h2>
<p>本演習では、AI技術（特に粒子群最適化：PSO）とFEM構造解析を組み合わせた建築設計システムを使用し、パラメータ探索を通じて以下を学びます：</p>
<ol>
<li><strong>設計パラメータと建築性能の関係を理解する</strong></li>
<li><strong>構造安全性と経済性のトレードオフを体験する</strong></li>
<li><strong>環境配慮型設計の実践的アプローチを習得する</strong></li>
<li><strong>データに基づく設計意思決定プロセスを学ぶ</strong></li>
</ol>
<hr />
<h2 id="-事前準備">🛠️ 事前準備</h2>
<h3 id="必要なソフトウェア">必要なソフトウェア</h3>
<ul>
<li><strong>FreeCAD</strong> 0.21以上（3D CADソフトウェア）</li>
<li><strong>Python</strong> 3.8以上</li>
<li><strong>CalculiX</strong> （FEM解析ソルバー、FreeCADに含まれる）</li>
<li><strong>テキストエディタ</strong> （VSCode、Notepad++等）</li>
</ul>
<h3 id="必要なファイル">必要なファイル</h3>
<div class="codehilite"><pre><span></span><code>📁 作業ディレクトリ/
├── 📄 test_generate_building.py      # メインスクリプト
├── 📄 generate_building_fem_analyze.py # 解析モジュール
├── 📄 pso_config.py                   # 最適化設定（発展課題用）
└── 📁 output/                         # 出力ディレクトリ（自動生成）
</code></pre></div>

<h3 id="基本実行コマンド">基本実行コマンド</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># macOS/Linux</span>
/Applications/FreeCAD.app/Contents/Resources/bin/freecadcmd<span class="w"> </span>test_generate_building.py

<span class="c1"># Windows</span>
<span class="s2">&quot;C:\Program Files\FreeCAD\bin\FreeCADCmd.exe&quot;</span><span class="w"> </span>test_generate_building.py
</code></pre></div>

<hr />
<h2 id="-演習課題">📚 演習課題</h2>
<h3 id="level-1基礎理解編---パラメータの影響を理解する">【Level 1】基礎理解編 - パラメータの影響を理解する</h3>
<h4>演習1-1: 建物サイズと構造性能の関係</h4>
<p><strong>🎯 学習目標：</strong> 建物の大きさが構造安全性と経済性にどう影響するかを理解する</p>
<p><strong>📊 実験手順：</strong></p>
<ol>
<li><code>test_generate_building.py</code>の33-38行目を編集し、以下の3パターンを実行：</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="c1"># パターンA：小規模住宅（6m×6m）</span>
<span class="n">default_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Lx&#39;</span><span class="p">:</span> <span class="mf">6.0</span><span class="p">,</span>  <span class="s1">&#39;Ly&#39;</span><span class="p">:</span> <span class="mf">6.0</span><span class="p">,</span>
    <span class="s1">&#39;H1&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>  <span class="s1">&#39;H2&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>
    <span class="c1"># 他のパラメータは変更しない</span>
<span class="p">}</span>

<span class="c1"># パターンB：中規模建築（10m×10m）</span>
<span class="n">default_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Lx&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s1">&#39;Ly&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>
    <span class="s1">&#39;H1&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>  <span class="s1">&#39;H2&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># パターンC：大規模建築（15m×15m）</span>
<span class="n">default_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Lx&#39;</span><span class="p">:</span> <span class="mf">15.0</span><span class="p">,</span> <span class="s1">&#39;Ly&#39;</span><span class="p">:</span> <span class="mf">15.0</span><span class="p">,</span>
    <span class="s1">&#39;H1&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>  <span class="s1">&#39;H2&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>📝 データ記録表：</strong></p>
<table>
<thead>
<tr>
<th>建物規模</th>
<th>床面積(m²)</th>
<th>安全率</th>
<th>建設コスト(円/m²)</th>
<th>快適性スコア</th>
<th>最大変位(mm)</th>
</tr>
</thead>
<tbody>
<tr>
<td>小規模</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>中規模</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>大規模</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>💡 考察のヒント：</strong>
- なぜ建物が大きくなると安全率が変化するのか？
- スケールメリットは建設コストに現れているか？
- 快適性スコアの変化要因は何か？</p>
<hr />
<h4>演習1-2: 構造部材寸法の最適化</h4>
<p><strong>🎯 学習目標：</strong> 柱・梁・スラブの寸法が構造性能とコストに与える影響を定量化する</p>
<p><strong>📊 実験手順：</strong></p>
<p>柱サイズを段階的に変更し、安全率2.0を達成する最小寸法を見つける：</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># test_generate_building.pyの41-44行目を編集</span>

<span class="c1"># Step 1: 細い柱（構造的に不十分）</span>
<span class="s1">&#39;bc&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>  <span class="c1"># 柱幅 200mm</span>
<span class="s1">&#39;hc&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>  <span class="c1"># 柱高さ 200mm</span>

<span class="c1"># Step 2: 標準的な柱</span>
<span class="s1">&#39;bc&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>  <span class="c1"># 柱幅 400mm</span>
<span class="s1">&#39;hc&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>  <span class="c1"># 柱高さ 400mm</span>

<span class="c1"># Step 3: 太い柱（過剰設計）</span>
<span class="s1">&#39;bc&#39;</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span>  <span class="c1"># 柱幅 600mm</span>
<span class="s1">&#39;hc&#39;</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span>  <span class="c1"># 柱高さ 600mm</span>
</code></pre></div>

<p><strong>📈 グラフ作成：</strong>
- X軸：柱断面積（mm²）
- Y軸1：安全率（左軸）
- Y軸2：建設コスト（右軸）</p>
<p><strong>💭 設計判断の練習：</strong>
「安全率2.0を確保しつつ、最もコスト効率の良い柱寸法は？」</p>
<hr />
<h3 id="level-2応用編---材料選択と環境性能">【Level 2】応用編 - 材料選択と環境性能</h3>
<h4>演習2-1: ハイブリッド構造の探求</h4>
<p><strong>🎯 学習目標：</strong> コンクリートと木材の適材適所な使い分けを学ぶ</p>
<p><strong>🌱 環境配慮の観点：</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># test_generate_building.pyの56-62行目を編集</span>

<span class="c1"># 構造A：従来型RC造（全コンクリート）</span>
<span class="n">material_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;material_columns&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># 0=コンクリート</span>
    <span class="s1">&#39;material_floor1&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;material_floor2&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;material_roof&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;material_walls&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;material_balcony&#39;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>

<span class="c1"># 構造B：ハイブリッド構造（最適配置）</span>
<span class="n">material_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;material_columns&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># 柱：コンクリート（高強度）</span>
    <span class="s1">&#39;material_floor1&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>     <span class="c1"># 1階床：コンクリート（基礎）</span>
    <span class="s1">&#39;material_floor2&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>     <span class="c1"># 2階床：木材（軽量化）</span>
    <span class="s1">&#39;material_roof&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>       <span class="c1"># 屋根：木材（断熱性）</span>
    <span class="s1">&#39;material_walls&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>      <span class="c1"># 壁：木材（環境性）</span>
    <span class="s1">&#39;material_balcony&#39;</span><span class="p">:</span> <span class="mi">0</span>     <span class="c1"># バルコニー：コンクリート（耐候性）</span>
<span class="p">}</span>

<span class="c1"># 構造C：木造建築（全木材/CLT）</span>
<span class="n">material_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;material_columns&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>    <span class="c1"># 1=木材（CLT）</span>
    <span class="s1">&#39;material_floor1&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;material_floor2&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;material_roof&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;material_walls&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;material_balcony&#39;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>📊 環境性能比較表：</strong></p>
<table>
<thead>
<tr>
<th>構造タイプ</th>
<th>CO2排出量(kg-CO2/m²)</th>
<th>RC造比削減率(%)</th>
<th>安全率</th>
<th>建設コスト</th>
<th>重量(ton)</th>
</tr>
</thead>
<tbody>
<tr>
<td>RC造</td>
<td></td>
<td>基準(0%)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ハイブリッド</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>木造</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>🏆 チャレンジ課題：</strong>
「CO2排出量を30%削減しながら、安全率2.0を維持する材料組み合わせを見つけよ」</p>
<hr />
<h4>演習2-2: 特殊形状による構造性能向上</h4>
<p><strong>🎯 学習目標：</strong> 建築形状が構造性能に与える影響を視覚的・定量的に理解する</p>
<p><strong>🏗️ 形状実験：</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 壁傾斜角度の実験（48行目）</span>
<span class="n">wall_configs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;angle&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;内傾斜（台形）&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;angle&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>   <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;垂直壁（標準）&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;angle&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;外傾斜（逆台形）&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="c1"># 屋根形状の実験（50-51行目）</span>
<span class="n">roof_configs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;morph&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;shift&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;フラット&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;morph&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;shift&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;対称アーチ&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;morph&#39;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span> <span class="s1">&#39;shift&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;非対称シェル&#39;</span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>

<p><strong>📸 3Dモデル比較：</strong>
1. 各形状のFCStdファイルを生成
2. FreeCAD GUIで開いて視覚化
3. 構造的特徴をスケッチで記録
4. 応力分布の違いを観察</p>
<hr />
<h3 id="level-3実践編---制約条件下での最適設計">【Level 3】実践編 - 制約条件下での最適設計</h3>
<h4>演習3-1: 実プロジェクトシミュレーション</h4>
<p><strong>🎯 学習目標：</strong> 実際の建築プロジェクトで直面する複数の制約条件を満たす設計を見つける</p>
<p><strong>📋 プロジェクト要求仕様：</strong></p>
<div class="codehilite"><pre><span></span><code>【必須要件】
✅ 延床面積：100m²以上（2階建て）
✅ 構造安全率：2.0以上（建築基準法準拠）
✅ 建設予算：300,000円/m²以下
✅ 環境基準：CO2排出量 500 kg-CO2/m²以下

【希望要件】
⭐ 快適性スコア：7.0以上
⭐ 施工性スコア：6.0以上
⭐ バルコニー付き（奥行1.5m以上）
</code></pre></div>

<p><strong>🔄 最適化プロセス記録：</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 試行記録テンプレート</span>
<span class="n">iteration_log</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;試行&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;変更内容&#39;</span><span class="p">:</span> <span class="s1">&#39;Lxを8→9mに拡大&#39;</span><span class="p">,</span>
    <span class="s1">&#39;結果&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;床面積&#39;</span><span class="p">:</span> <span class="mi">81</span><span class="p">,</span>
        <span class="s1">&#39;安全率&#39;</span><span class="p">:</span> <span class="mf">1.85</span><span class="p">,</span>  <span class="c1"># ❌ 不足</span>
        <span class="s1">&#39;コスト&#39;</span><span class="p">:</span> <span class="mi">285000</span><span class="p">,</span>  <span class="c1"># ✅ OK</span>
        <span class="s1">&#39;CO2&#39;</span><span class="p">:</span> <span class="mi">480</span><span class="p">,</span>  <span class="c1"># ✅ OK</span>
    <span class="p">},</span>
    <span class="s1">&#39;判定&#39;</span><span class="p">:</span> <span class="s1">&#39;安全率不足→柱サイズ増が必要&#39;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h4>演習3-2: 多目的最適化チャレンジ</h4>
<p><strong>🎯 学習目標：</strong> 異なるステークホルダーの要求に応える複数の設計案を作成する</p>
<p><strong>👥 3つのシナリオ：</strong></p>
<h3 id="シナリオa投資家向け経済性重視">シナリオA：投資家向け（経済性重視）</h3>
<div class="codehilite"><pre><span></span><code><span class="n">optimization_weights</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;safety&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>     <span class="c1"># 必須要件（最低限）</span>
    <span class="s1">&#39;cost&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>       <span class="c1"># 最重要</span>
    <span class="s1">&#39;environment&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="s1">&#39;comfort&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="s1">&#39;constructability&#39;</span><span class="p">:</span> <span class="mf">0.1</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="シナリオb環境団体向けサステナビリティ重視">シナリオB：環境団体向け（サステナビリティ重視）</h3>
<div class="codehilite"><pre><span></span><code><span class="n">optimization_weights</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;safety&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
    <span class="s1">&#39;cost&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="s1">&#39;environment&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>  <span class="c1"># 最重要</span>
    <span class="s1">&#39;comfort&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="s1">&#39;constructability&#39;</span><span class="p">:</span> <span class="mf">0.1</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="シナリオcエンドユーザー向け快適性重視">シナリオC：エンドユーザー向け（快適性重視）</h3>
<div class="codehilite"><pre><span></span><code><span class="n">optimization_weights</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;safety&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
    <span class="s1">&#39;cost&#39;</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">,</span>
    <span class="s1">&#39;environment&#39;</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">,</span>
    <span class="s1">&#39;comfort&#39;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>     <span class="c1"># 最重要</span>
    <span class="s1">&#39;constructability&#39;</span><span class="p">:</span> <span class="mf">0.1</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>📊 比較分析：</strong>
各シナリオの最適解をレーダーチャートで可視化し、トレードオフを明確化</p>
<hr />
<h3 id="level-4発展編---pso自動最適化の活用">【Level 4】発展編 - PSO自動最適化の活用</h3>
<h4>演習4-1: PSO設定のカスタマイズ</h4>
<p><strong>🎯 学習目標：</strong> 粒子群最適化アルゴリズムの動作原理を理解し、問題に応じた調整を行う</p>
<p><strong>⚙️ PSO設定ファイル（pso_config.py）の編集：</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 最適化パラメータ</span>
<span class="n">N_PARTICLES</span> <span class="o">=</span> <span class="mi">20</span>      <span class="c1"># 粒子数（探索の並列度）</span>
<span class="n">MAX_ITER</span> <span class="o">=</span> <span class="mi">30</span>        <span class="c1"># 反復回数（探索の深さ）</span>

<span class="c1"># 設計変数の範囲設定</span>
<span class="n">BOUNDS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Lx&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">),</span>      <span class="c1"># X方向長さの探索範囲</span>
    <span class="s1">&#39;Ly&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">),</span>      <span class="c1"># Y方向長さの探索範囲</span>
    <span class="s1">&#39;bc&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">600</span><span class="p">),</span>       <span class="c1"># 柱サイズの探索範囲</span>
    <span class="s1">&#39;material_columns&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>  <span class="c1"># 材料選択（0=コンクリート、1=木材）</span>
    <span class="c1"># ... 他のパラメータ</span>
<span class="p">}</span>

<span class="c1"># 評価関数の重み付け</span>
<span class="k">def</span> <span class="nf">calculate_fitness</span><span class="p">(</span><span class="n">evaluation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;カスタム評価関数&quot;&quot;&quot;</span>
    <span class="c1"># 安全率が2.0未満はペナルティ</span>
    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="s1">&#39;safety&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">2.0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">1e10</span>  <span class="c1"># 極大値（不適解）</span>

    <span class="c1"># 重み付き総合評価</span>
    <span class="n">fitness</span> <span class="o">=</span> <span class="p">(</span>
        <span class="mf">0.3</span> <span class="o">*</span> <span class="n">evaluation</span><span class="p">[</span><span class="s1">&#39;cost&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">300000</span> <span class="o">+</span>        <span class="c1"># コスト（正規化）</span>
        <span class="mf">0.3</span> <span class="o">*</span> <span class="n">evaluation</span><span class="p">[</span><span class="s1">&#39;co2&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">500</span> <span class="o">+</span>            <span class="c1"># CO2（正規化）</span>
        <span class="mf">0.2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="s1">&#39;comfort&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">+</span>  <span class="c1"># 快適性（逆数）</span>
        <span class="mf">0.2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="s1">&#39;constructability&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="mi">10</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">fitness</span>
</code></pre></div>

<p><strong>🚀 実行と監視：</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># PSO実行</span>
freecadcmd<span class="w"> </span>pso_algorithm.py

<span class="c1"># 別ターミナルで監視</span>
python<span class="w"> </span>monitor_pso_win.py<span class="w">  </span><span class="c1"># Windows</span>
python<span class="w"> </span>monitor_pso_mac.py<span class="w">  </span><span class="c1"># macOS</span>

<span class="c1"># ブラウザで確認</span>
http://localhost:5001
</code></pre></div>

<hr />
<h2 id="-レポート作成ガイド">📝 レポート作成ガイド</h2>
<h3 id="推奨レポート構成a4-6-8ページ">推奨レポート構成（A4 6-8ページ）</h3>
<h4>1. はじめに（0.5ページ）</h4>
<ul>
<li>建築設計における最適化の重要性</li>
<li>AI技術（PSO）の役割</li>
<li>本演習の目的と範囲</li>
</ul>
<h4>2. 方法論（1ページ）</h4>
<ul>
<li>使用システムの概要（フローチャート推奨）</li>
<li>評価指標の定義と計算方法</li>
<li>実験条件と変数の説明</li>
</ul>
<h4>3. 実験結果（3-4ページ）</h4>
<h5>3.1 基礎実験の結果</h5>
<ul>
<li>パラメータ感度分析の表とグラフ</li>
<li>代表的な3Dモデルの画像（最低3種類）</li>
</ul>
<h5>3.2 応用実験の結果</h5>
<ul>
<li>材料組み合わせの比較表</li>
<li>形状変化による性能変化のグラフ</li>
</ul>
<h5>3.3 最適化の結果</h5>
<ul>
<li>制約条件を満たす設計案の詳細</li>
<li>PSO収束グラフ（発展課題実施の場合）</li>
</ul>
<h4>4. 考察（1.5-2ページ）</h4>
<ul>
<li><strong>発見した設計原則</strong></li>
<li>どのパラメータが最も影響力があったか？</li>
<li>
<p>なぜその結果になったのか？（物理的な理由）</p>
</li>
<li>
<p><strong>トレードオフ分析</strong></p>
</li>
<li>相反する要求のバランス点</li>
<li>
<p>実用的な妥協案の提案</p>
</li>
<li>
<p><strong>実装上の課題と解決策</strong></p>
</li>
<li>遭遇した問題と対処法</li>
<li>システムの改善提案</li>
</ul>
<h4>5. 結論（0.5ページ）</h4>
<ul>
<li>主要な発見のまとめ（3点以内）</li>
<li>実務への応用可能性</li>
<li>今後の研究課題</li>
</ul>
<h4>6. 参考文献</h4>
<ul>
<li>使用したドキュメント</li>
<li>参考にした論文や書籍</li>
</ul>
<h3 id="図表作成のヒント">図表作成のヒント</h3>
<p><strong>効果的なグラフの例：</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># 2軸グラフの作成（安全率とコスト）</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;柱断面積 (mm²)&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;安全率&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:blue&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">areas</span><span class="p">,</span> <span class="n">safety_factors</span><span class="p">,</span> <span class="s1">&#39;b-o&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;安全率&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;安全基準&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="s1">&#39;tab:blue&#39;</span><span class="p">)</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;建設コスト (円/m²)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:red&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">areas</span><span class="p">,</span> <span class="n">costs</span><span class="p">,</span> <span class="s1">&#39;r-s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;コスト&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="s1">&#39;tab:red&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;柱断面積と構造性能・コストの関係&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<hr />
<h2 id="-評価基準">📊 評価基準</h2>
<h3 id="配点表100点満点">配点表（100点満点）</h3>
<table>
<thead>
<tr>
<th>評価項目</th>
<th>配点</th>
<th>評価の観点</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>実験の完成度</strong></td>
<td>30点</td>
<td>・全課題の実施<br>・データの完全性<br>・手順の正確性</td>
</tr>
<tr>
<td><strong>データ分析</strong></td>
<td>25点</td>
<td>・適切な統計処理<br>・グラフの見やすさ<br>・比較の妥当性</td>
</tr>
<tr>
<td><strong>考察の深さ</strong></td>
<td>25点</td>
<td>・物理的根拠の説明<br>・トレードオフの理解<br>・独自の発見</td>
</tr>
<tr>
<td><strong>レポートの質</strong></td>
<td>15点</td>
<td>・構成の論理性<br>・図表の効果的使用<br>・文章の明確性</td>
</tr>
<tr>
<td><strong>創造性</strong></td>
<td>5点</td>
<td>・独自の実験設計<br>・新しい知見<br>・改善提案</td>
</tr>
</tbody>
</table>
<h3 id="評価レベル">評価レベル</h3>
<ul>
<li><strong>S（90点以上）</strong>: 全課題を完璧に実施し、独自の発見や深い考察がある</li>
<li><strong>A（80-89点）</strong>: 必須課題を完了し、データ分析と考察が優れている</li>
<li><strong>B（70-79点）</strong>: 基本課題を完了し、適切な分析ができている</li>
<li><strong>C（60-69点）</strong>: 最低限の課題を完了している</li>
<li><strong>D（60点未満）</strong>: 課題の完成度が不十分</li>
</ul>
<hr />
<h2 id="-トラブルシューティング">🆘 トラブルシューティング</h2>
<h3 id="よくある問題と解決策">よくある問題と解決策</h3>
<h4>問題1：FreeCADが起動しない</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># パスを確認</span>
which<span class="w"> </span>freecadcmd<span class="w">  </span><span class="c1"># macOS/Linux</span>
where<span class="w"> </span>freecadcmd<span class="w">  </span><span class="c1"># Windows</span>

<span class="c1"># 直接フルパスで実行</span>
/usr/local/bin/freecadcmd<span class="w"> </span>test_generate_building.py
</code></pre></div>

<h4>問題2：計算時間が長すぎる</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># 解決策：メッシュサイズを大きくする</span>
<span class="c1"># generate_building_fem_analyze.pyの該当行を編集</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">CharacteristicLengthMax</span> <span class="o">=</span> <span class="mi">500</span>  <span class="c1"># デフォルト300から増加</span>
</code></pre></div>

<h4>問題3：安全率が異常値になる</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># デバッグモード有効化</span>
<span class="n">VERBOSE_OUTPUT</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># generate_building_fem_analyze.pyの先頭</span>

<span class="c1"># ログファイルを確認</span>
<span class="n">tail</span> <span class="o">-</span><span class="n">f</span> <span class="n">output</span><span class="o">/</span><span class="n">debug</span><span class="o">.</span><span class="n">log</span>
</code></pre></div>

<h4>問題4：メモリ不足エラー</h4>
<ul>
<li>建物サイズを小さくする（Lx, Ly &lt; 10m）</li>
<li>同時実行プロセスを減らす</li>
<li>メッシュ品質を下げる</li>
</ul>
<hr />
<h2 id="-参考資料・リンク">📚 参考資料・リンク</h2>
<h3 id="技術ドキュメント">技術ドキュメント</h3>
<ul>
<li><a href="https://wiki.freecad.org/Python_scripting_tutorial">FreeCAD Python API</a></li>
<li><a href="http://www.calculix.de/documentation/">CalculiX Documentation</a></li>
<li><a href="https://en.wikipedia.org/wiki/Particle_swarm_optimization">PSO Algorithm Overview</a></li>
</ul>
<h3 id="建築基準・規格">建築基準・規格</h3>
<ul>
<li>建築基準法における構造安全率の規定</li>
<li>木造建築設計基準（CLT）</li>
<li>環境性能評価基準（CASBEE）</li>
</ul>
<h3 id="推奨学習リソース">推奨学習リソース</h3>
<ul>
<li>構造力学の基礎（静定構造物）</li>
<li>有限要素法入門</li>
<li>最適化アルゴリズムの基礎</li>
</ul>
<hr />
<h2 id="-提出前チェックリスト">✅ 提出前チェックリスト</h2>
<h3 id="必須提出物">必須提出物</h3>
<ul>
<li>[ ] <strong>実験データファイル</strong>（Excel or CSV形式）</li>
<li>全実験の生データ</li>
<li>
<p>計算過程が分かる数式</p>
</li>
<li>
<p>[ ] <strong>レポート</strong>（PDF形式、6-8ページ）</p>
</li>
<li>指定フォーマットに従っているか</li>
<li>
<p>図表番号と本文の参照が一致</p>
</li>
<li>
<p>[ ] <strong>代表的FCStdファイル</strong>（3-5個）</p>
</li>
<li>最適解</li>
<li>比較用の典型例</li>
<li>
<p>特徴的な形状</p>
</li>
<li>
<p>[ ] <strong>プログラムファイル</strong>（編集した場合）</p>
</li>
<li>コメント付きの変更箇所</li>
<li>実行手順のREADME</li>
</ul>
<h3 id="オプション提出物">オプション提出物</h3>
<ul>
<li>[ ] 3Dモデルのレンダリング画像</li>
<li>[ ] 追加実験の結果</li>
<li>[ ] 改善提案書</li>
</ul>
<h3 id="提出方法">提出方法</h3>
<ul>
<li><strong>期限</strong>: 演習実施から2週間以内</li>
<li><strong>形式</strong>: ZIPファイルにまとめて提出</li>
<li><strong>命名規則</strong>: <code>学籍番号_氏名_AI建築演習.zip</code></li>
<li><strong>提出先</strong>: 指定のLMSまたはメールアドレス</li>
</ul>
<hr />
<h2 id="-成功のヒント">💡 成功のヒント</h2>
<ol>
<li><strong>段階的に進める</strong> - 基礎課題から順番に、理解を深めながら進む</li>
<li><strong>データを整理する</strong> - Excelで実験記録表を作り、随時更新</li>
<li><strong>視覚化を活用</strong> - グラフや3Dモデルで直感的理解を深める</li>
<li><strong>仮説を立てる</strong> - 実験前に結果を予想し、検証する</li>
<li><strong>協力する</strong> - クラスメートと結果を比較し、議論する</li>
</ol>
<hr />
<p><em>最終更新: 2025年8月</em>
<em>作成: AI建築設計演習チーム</em></p>
            </article>
        </main>
    </div>
    
    <a href="#" class="back-to-top" id="back-to-top">↑ トップへ</a>
    
    <script>
        // スムーズスクロール
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // アクティブセクションのハイライト
        const sections = document.querySelectorAll('h1[id], h2[id], h3[id]');
        const navLinks = document.querySelectorAll('.sidebar a[href^="#"]');
        
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                if (scrollY >= (sectionTop - 100)) {
                    current = section.getAttribute('id');
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
            
            // Back to top ボタンの表示/非表示
            const backToTop = document.getElementById('back-to-top');
            if (window.scrollY > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        });
        
        // MathJax再処理
        if (window.MathJax && window.MathJax.typesetPromise) {
            MathJax.typesetPromise();
        }
    </script>
</body>
</html>
